> Q3季度分享ppt大纲

### 背景
社畜们一到下午三四点就开始开始奶茶炸鸡星爸爸了，用饿了么app的不在少数。但是饿了么特别坑爹是一直不出类似于美团的拼单账单功能，以致于每次拼单后都要手动计算每个乘客的账单。
鉴于手动算账过于麻烦， 我决定开发一个小程序来方便算账，以下是开发过程及项目介绍。

### 思路
- 对app进行抓包：ele对抓包做了限制，抓不到有用的信息
  
   > 也可能是我方法不对，大家可以自己尝试
   
- 解析h5或者小程序：非开发者无法解析
- 账单截图ocr解析：经过ocr识别后得到账单信息，但精度无法保证，暂定

### 流程
流程图
- 饿了么账单截图
- 百度OCR解析图片
- 得到解析结果后分析账单信息
- 计算拼单账单

### 技术选型
#### 前端：
- 语言：html css js （jquery库）
- 框架：layui（ https://www.layui.com/）
#### 服务端：
- 语言：python
- web框架：flask
#### 存储：
暂未涉及数据库存储，数据都在内存中
> 图片上传后，以二进制文件的形式保存在服务器中

### flask介绍
Flask 是一个使用 Python 编写的轻量级 Web 应用程序框架。Flask基于Werkzeug WSGI工具包和Jinja2模板引擎。

- WSGI
   Web Server Gateway Interface（Web服务器网关接口，WSGI）已被用作Python Web应用程序开发的标准。  WSGI是Web服务器和Web应用程序之间通用接口的规范。
- Werkzeug
它是一个WSGI工具包，它实现了请求，响应对象和实用函数。  这使得能够在其上构建web框架。  Flask框架使用Werkzeug作为其基础之一。
- jinja2
jinja2是Python的一个流行的模板引擎。Web模板系统将模板与特定数据源组合以呈现动态网页。
- 图片
- 举两个小栗子

### 项目结构
- server.py ：服务主模块，用于启动web服务器、定义路由
- ele：
  - static：存放储静态文件，如css js img等
  - templetes：存放jinja2模板，用于上传账单截图、展示账单
  - 功能模块：
     - ele_bill.py：获取百度OCR oken 、解析账单截图
     - ai_account.py：解析ocr结果，计算账单

### 图示
- 画个图展示
- 文字描述一下


### 技术难点
#### 解析百度ocr的结果

- 百度ocr返回值
- 如何解析返回的json
  > 画一个流程图？
  > 或者提供一个思路
#### 计算出来账单传递给html后如何渲染
- 不需要页面整体刷新，仅需要局部刷新即可
- 使用jquery来发送请求，渲染账单表格

### 局限性
- 截图超过一屏时，截图结果中会出现遮挡（截图示例）
- 百度ocr解析截图不准确（看下解析结果截图与原图对比）
- 解析json规则对有些账单不适用（举个列子，需要优化）


